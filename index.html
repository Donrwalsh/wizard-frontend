<link rel="stylesheet" href="mana.css">
<div class="outer">
    
    <img id="mana" class="noselect" src="SpellBookPage09_105.png" draggable="false" onclick="spellCast()">
    <div id="overlay" class="noselect"></div>

</div>


<script>
    function spellCast() {
        console.log("+1 mana");
        document.getElementById('overlay').style.opacity = "0.9";
        document.getElementById('overlay').style.background = "black";
        document.getElementById('mana').style.cursor = "wait";
        document.getElementById('mana').style.border = "4px solid red";

        buttonAction(0, 5);
    }

    
    function buttonAction(index, seconds) {
        if (index == 1000 * seconds) {
            document.getElementById('overlay').style.opacity = "0";
            document.getElementById('overlay').style.background = "transparent";
            document.getElementById('mana').style.cursor = "pointer";
            document.getElementById('mana').style.border = "4px solid transparent";
        } else {
            percent = Math.floor(((1 - (index / (1000 * seconds))) * 100 ) * .94);
            document.getElementById('overlay').style.height = percent + "%";
            document.getElementById('overlay').style.width = percent + "%";
            setTimeout(() => {
                buttonAction(index+10, seconds);
            }, 10)
        }
    }
</script>